<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Skrining TBC — eSCare</title>
    <style>
        :root{--bg:#f4f7fb;--card:#fff;--accent:#2b7a78;--accent-2:#d9534f;--muted:#6b7280;--radius:12px;--shadow:0 6px 22px rgba(16,24,40,0.08)}
        *{box-sizing:border-box}
        body{margin:0;background:linear-gradient(180deg,#e8f7f6 0%,var(--bg) 100%);font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#0f172a;display:flex;align-items:center;justify-content:center;padding:24px;min-height:100vh}
        .wrap{width:100%;max-width:820px}
        .card{background:var(--card);border-radius:var(--radius);padding:28px;box-shadow:var(--shadow);position:relative}
        header{display:flex;gap:16px;align-items:center;margin-bottom:18px;justify-content:space-between}
        .logo{width:56px;height:56px;background:linear-gradient(135deg,var(--accent),#4aa6a4);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;flex:0 0 56px}
        h1{font-size:18px;margin:0}
        p.lead{margin:4px 0 0 0;font-size:13px;color:var(--muted)}
        .top-actions{display:flex;gap:8px;align-items:center}
        .top-actions button{padding:8px 12px;border-radius:10px;border:none;background:#f3f4f6;cursor:pointer;font-weight:700}
        .top-actions button.active{background:var(--accent);color:white}
        .step-labels{display:flex;gap:10px;justify-content:space-between;font-size:12px;color:var(--muted);margin-bottom:8px}
        .progress{display:flex;gap:10px;margin-bottom:16px}
        .step{flex:1;height:10px;background:#eef2f5;border-radius:10px;overflow:hidden}
        .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#4aa6a4);transition:width .35s}
        form .section{display:none}
        form .section.active{display:block}
        .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
        .field{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
        label{font-weight:600;font-size:13px}
        input, textarea, select{padding:10px;border-radius:8px;border:1px solid #e6e9ee;font-size:14px}
        textarea{min-height:90px;resize:vertical}
        .full{grid-column:1 / -1}
        .choices{display:flex;gap:8px;flex-wrap:wrap}
        .chip{padding:8px 12px;border-radius:999px;border:1px solid #e6e9ee;background:#fff;cursor:pointer}
        .chip.active{background:var(--accent);color:#fff;border-color:transparent;box-shadow:0 6px 16px rgba(43,122,120,0.14)}
        .buttons{display:flex;gap:12px;justify-content:space-between;margin-top:16px;align-items:center}
        .btn{padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
        .btn.secondary{background:#f3f4f6;color:#111;border:1px solid #e6e9ee}
        .btn.primary{background:var(--accent);color:#fff;box-shadow:0 8px 26px rgba(43,122,120,0.14)}
        .btn.warn{background:var(--accent-2);color:#fff}
        .note{font-size:13px;color:var(--muted)}
        .message{display:none;padding:12px;border-radius:8px;margin-top:12px;font-weight:600}
        .message.show{display:block}
        .message.success{background:#ecf9f6;color:#0b5b53}
        .message.error{background:#fff3f2;color:#7a271f}
        footer{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}

        /* Results panel */
        #resultsPanel{display:none;padding:10px;border-radius:10px;border:1px solid #eef2f5;background:#fbfeff;margin-top:12px}
        #resultsPanel h3{margin-top:0}
        .kv{display:flex;gap:10px;padding:8px 0;border-bottom:1px dashed #eef2f5}
        .kv:last-child{border-bottom:none}
        .kv .k{width:40%;color:var(--muted);font-weight:600}
        .kv .v{width:60%}

        /* Modal */
        .modal-backdrop{position:fixed;inset:0;background:rgba(10,12,14,0.45);display:none;align-items:center;justify-content:center;z-index:40}
        .modal{background:white;border-radius:12px;padding:20px;max-width:520px;width:92%;box-shadow:0 12px 40px rgba(2,6,23,0.35)}
        .modal h2{margin:0 0 8px 0}
        .modal .modal-body{margin-top:12px}
        .modal .modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:18px}
        .modal .thanks{background:#ecf9f6;padding:10px;border-radius:8px;color:#0b5b53;margin-top:12px;font-weight:700}

        @media (max-width:720px){.grid{grid-template-columns:1fr}.logo{width:48px;height:48px}}
    </style>
</head>
<body>
    <div class="wrap">
        <div class="card" role="main" aria-labelledby="title">
            <header>
                <div style="display:flex;gap:16px;align-items:center">
                    <div class="logo" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M9 3c0 3-2 6-5 6" stroke="rgba(255,255,255,0.95)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M15 3c0 3 2 6 5 6" stroke="rgba(255,255,255,0.95)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 8v11" stroke="rgba(255,255,255,0.95)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div>
                        <h1 id="title">Skrining TBC — eSCare</h1>
                        <p class="lead">Form singkat — isi Data Diri, Gejala Utama, Keluhan, Informasi Lain.</p>
                    </div>
                </div>

                <div class="top-actions" aria-hidden="true">
                    <button id="viewFormBtn" class="active">Form</button>
                    <button id="viewResultsBtn">Hasil</button>
                </div>
            </header>

            <div class="step-labels" aria-hidden="true">
                <span>Data Diri</span><span>Gejala Utama</span><span>Keluhan</span><span>Informasi Lain</span>
            </div>
            <div class="progress" aria-hidden="true">
                <div class="step"><div class="bar" data-step="0" style="width:100%"></div></div>
                <div class="step"><div class="bar" data-step="1"></div></div>
                <div class="step"><div class="bar" data-step="2"></div></div>
                <div class="step"><div class="bar" data-step="3"></div></div>
            </div>

            <!-- Main Form -->
            <form id="tbForm" autocomplete="off">
                <section class="section active" data-index="0" aria-label="Data Diri">
                    <div class="grid">
                        <div class="field full"><label for="name">Nama Lengkap <span style="color:#d9534f">*</span></label><input id="name" name="name" type="text" required placeholder="Nama pasien" /></div>
                        <div class="field"><label for="age">Usia (tahun) <span style="color:#d9534f">*</span></label><input id="age" name="age" type="number" min="0" required placeholder="35" /></div>
                        <div class="field"><label for="gender">Jenis Kelamin <span style="color:#d9534f">*</span></label><select id="gender" name="gender" required><option value="">Pilih</option><option value="Laki-laki">Laki-laki</option><option value="Perempuan">Perempuan</option><option value="Lainnya">Lainnya</option></select></div>
                        <div class="field"><label for="phone">Nomor Telepon</label><input id="phone" name="phone" type="tel" placeholder="+62..." /></div>
                        <div class="field full"><label for="address">Alamat / Kota</label><input id="address" name="address" type="text" placeholder="Contoh: Jakarta Selatan" /></div>
                    </div>
                    <p class="note">Kolom bertanda * wajib diisi.</p>
                </section>

                <section class="section" data-index="1" aria-label="Gejala Utama">
                    <div class="grid">
                        <div class="field full"><label>Batuk > 2 minggu?</label><div class="choices"><button type="button" class="chip" data-name="cough_long" data-value="Ya">Ya</button><button type="button" class="chip" data-name="cough_long" data-value="Tidak">Tidak</button></div></div>
                        <div class="field"><label>Batuk berdarah?</label><div class="choices"><button type="button" class="chip" data-name="cough_blood" data-value="Ya">Ya</button><button type="button" class="chip" data-name="cough_blood" data-value="Tidak">Tidak</button></div></div>
                        <div class="field"><label>Demam >2 minggu?</label><div class="choices"><button type="button" class="chip" data-name="fever_long" data-value="Ya">Ya</button><button type="button" class="chip" data-name="fever_long" data-value="Tidak">Tidak</button></div></div>
                        <div class="field"><label>Malam berkeringat?</label><div class="choices"><button type="button" class="chip" data-name="night_sweats" data-value="Ya">Ya</button><button type="button" class="chip" data-name="night_sweats" data-value="Tidak">Tidak</button></div></div>
                        <div class="field full"><label>Penurunan berat badan?</label><div class="choices"><button type="button" class="chip" data-name="weight_loss" data-value="Ya">Ya</button><button type="button" class="chip" data-name="weight_loss" data-value="Tidak">Tidak</button></div></div>
                    </div>
                </section>
